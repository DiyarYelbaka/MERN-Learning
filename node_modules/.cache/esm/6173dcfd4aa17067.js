let express,mongoose,bodyParser,User;_4aa‍.w("express",[["default",["express"],function(v){express=v}]]);_4aa‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_4aa‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_4aa‍.w("./models/User",[["default",["User"],function(v){User=v}]]);




const app = express();
const PORT = process.env.PORT || 5001;

require('dotenv').config()
const {DB_URI} =  process.env;

mongoose.connect(
   DB_URI,{useNewUrlParser: true, useUnifiedTopology: true},
    (err)=>{
       if(err) throw err;
       console.log('Bşarıyla Bağlandı')
    }
);

app.get('/',(req,res)=>{
    res.send("Server Çalışıyor")
})

app.get('/kullanicikaydet',(req,res)=>{
    const username='Emre' , password='223423'
    const letData = new User({
        username,
        password,
        notes:{title:'Sample',body:'Detay .....'}
    })
    letData.save((err)=>{
        if(err) throw err;
        console.log('Kaydedildi')
    })
res.send('a');
})

app.get('/notekle',(req,res)=>{
    const userID = '631a0687b01f1fbe93d55543';
    const noteTitle='Türkçe', notBody='Şey ayrı yazılır'
    User.findById(userID).then(doc=> {
        doc.notes.push({
            title:noteTitle,
            body:notbody,
        })
        doc.save();
    })
})

app.listen(PORT,(err)=>{
    if (err) throw err;
    console.log(`Server is running on ${PORT} port`)
});